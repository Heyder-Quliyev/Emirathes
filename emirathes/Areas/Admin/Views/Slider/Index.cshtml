@model List<Tickts>


<div class="row">
    <div class="col-lg-12">
        <div class="form-box">
            <div class="form-title-wrap">
                <div class="d-flex align-items-center justify-content-between">
                 
                  

                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-success" data-toggle="modal" data-target="#exampleModal">
                        New Tickts
                    </button>

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form id="SliderCreateForm" class="row" style="width: 500px;" method="post" asp-area="Admin" asp-controller="Slider" asp-action="Create">

                                        @Html.AntiForgeryToken()
                                        <div class="col-md-4">
                                            <label>
                                                Destination
                                            </label>
                                            <input name="Id" type="hidden" class="form-control" />
                                            <input name="Destiantion" type="text" class="form-control" />
                                        </div>

                                        <div class="col-md-4">
                                            <label>
                                                Direction
                                            </label>
                                            <select name="Way" type="text" class="form-select" style="width:304px; height:38px">
                                                <option value="One Way">One Way</option>
                                                <option value="Round-Trip">Round-Trip</option>
                                            </select>

                                            @* <input name="Way" type="text" class="form-control" /> *@

                                        </div>

                                        <div class="col-md-4">
                                            <label>
                                                Class
                                            </label>
                                            @* <input name="Classes" type="text" class="form-control" /> *@



                                            <select name="Classes" type="text" class="form-select" style="width:304px; height:38px">
                                                <option value="Economy Class">Economy Class</option>
                                                <option value="Business Class">Business Class</option>
                                                <option value="First Class">First Class</option>
                                            </select>



                                        </div>



                                        <div class="col-md-4">
                                            <label>
                                                Stops
                                            </label>

                                            <select name="Stop" type="text" class="form-select" style="width:304px; height:38px">
                                                <option value="Non Stop"> Non Stop</option>
                                                <option value="1 Stop">1 Stop</option>
                                                <option value="2 Stop">2 Stop</option>
                                                <option value="3 Stop">3 Stop</option>
                                            </select>

                                            @* <input name="Way" type="text" class="form-control" /> *@

                                        </div>


                                        <div class="col-md-4">
                                            <label>
                                                Flight Number
                                            </label>
                                            <input name="FlightNumber" type="text" class="form-control" />
                                        </div>

                                        <div class="col-md-4">
                                            <label>
                                                Price
                                            </label>
                                            <input name="Price" type="text" class="form-control" />

                                        </div>

                                        <div class="col-md-4">
                                            <label>
                                                Take Off Time
                                            </label>
                                            <input name="Date" type="text" class="form-control" />

                                        </div>

                                        <div class="col-md-4">
                                            <label>
                                                Landing Time
                                            </label>
                                            <input name="LandigTime" type="text" class="form-control" />
                                        </div>

                                        <div class="col-md-4">
                                            <label>
                                                Total Flight Time
                                            </label>
                                            <input name="Time" type="text" class="form-control" />

                                        </div>


                                        <div class="col-md-4">
                                            <label>
                                                Images
                                            </label>
                                            <input name="File" type="file" class="form-control" />
                                        </div>

                                        <div class="col-md-4">
                                            <label>
                                                Reviewed
                                            </label>
                                            <input name="IsAvailable" type="checkbox" class="form-check" />
                                        </div>


                                        <div class="col-md-4">
                                            <button type="submit" class="btn btn-success mt-3 btn-block">Edit</button>
                                        </div>
                                     
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                    <button form="SliderCreateForm" type="submit" class="btn btn-primary">Save changes</button>
                                </div>
                            </div>
                        </div>
                    </div>










                </div>
            </div>
            <div class="form-content">
                <div class="table-form table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Destiantion</th>
                                <th scope="col">Way</th>
                                <th scope="col">Class</th>
                                <th scope="col">Flight Number</th>
                                <th scope="col">Price</th>
                                <th scope="col">Take Off Time</th>
                                <th scope="col">Landing Time</th>
                                <th scope="col">Total Time</th>
                                <th scope="col">Image</th>
                                <th scope="col">Operation</th>

                                
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {



                                <tr>
                                    <th>@item.Destiantion</th>
                                    <td>
                                        <div class="table-content">
                                            <h3 class="title">@item.Way</h3>
                                        </div>
                                    </td>
                                    <td>@item.Classes</td>
                                    <td>@item.FlightNumber</td>
                                    <td>@item.Price</td>
                                    <td>@item.Date</td>
                                    <td>@item.LandigTime</td>
                                    <td>@item.Time</td>
                                    <td>

                                        <img width="100px" src="~/uploadSlider/@item.ImgUrl"/>

                                    </td>

                                    <td>
                                        <div class="table-content" style="width:50px;">
                                            <a class="btn btn-danger" asp-area="Admin" asp-controller="Slider" asp-action="Delete" asp-route-id="@item.Id">Delete</a>
                                            @* <a class="btn btn-success" asp-area="Admin" asp-controller="Slider" asp-action="Edit" asp-route-id="@item.Id"></a> *@
                                            <button data-id="@item.Id" type="button" class="editBtn btn btn-primary" data-toggle="modal" data-target="#exampleModalEdit">
                                                Edit
                                            </button>


                                            <div class="modal fade" id="exampleModalEdit" tabindex="-1" role="dialog" aria-labelledby="exampleModalEditLabel" aria-hidden="true">
                                                <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                <span aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <form id="SliderEditForm" class="row" style="width: 500px;" method="post" asp-area="Admin" asp-controller="Slider" asp-action="Edit">

                                                                @Html.AntiForgeryToken()
                                                                <div class="col-md-6">
                                                                    <label>
                                                                        Destination
                                                                    </label>
                                                                    <input name="Destiantion" type="text" class="form-control" />
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label>
                                                                        Direction
                                                                    </label>

                                                                    <input name="Way" type="text" class="form-control" />

                                                                    <span class="text-danger"></span>
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label>
                                                                        Class
                                                                    </label>
                                                                    <input name="Classes" type="text" class="form-control" />
                                                                   
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label>
                                                                        Flight Number
                                                                    </label>
                                                                    <input name="FlightNumber" type="text" class="form-control" />
                                                                   
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label>
                                                                        Price
                                                                    </label>
                                                                    <input name="Price" type="text" class="form-control" />
                                                                   
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label>
                                                                        Take Off Time
                                                                    </label>
                                                                    <input name="Date" type="text" class="form-control" />
                                                                    
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label>
                                                                        Landing Time 
                                                                    </label>
                                                                    <input name="LandigTime" type="text" class="form-control" />
                                                                   
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label>
                                                                        Total Flight Time
                                                                    </label>
                                                                    <input name="Time" type="text" class="form-control" />
                                                                  
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <label>
                                                                        Images
                                                                    </label>
                                                                    <input name="File" type="file" class="form-control" />
                                                                </div>

                                                            </form>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                                            <button form="SliderEditForm" type="submit" class="btn btn-primary">Save changes</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            }

                        </tbody>
                    </table>
                </div>
            </div>
        </div><!-- end form-box -->
    </div><!-- end col-lg-12 -->
</div><!-- end row -->

                                                    @section Scripts{
                                                        <script>


        <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.min.js" ></script>

    <script>

            $(document).ready(function () {
                $(document).on('click', '.deleteBtn', function (e) {
                    e.preventDefault();
                    let url = $(this).attr("href");
                    let element = this.parentElement.parentElement;

                    Swal.fire({
                        title: 'Silmək istədiyinizdən əminsinizmi?',
                        text: "Sildikdən sonra geri qaytarmaq mümkün olmayacaq!",
                        type: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Sil',
                        cancelButtonText: 'Geri'

                    }).then((result) => {
                        if (result.value) {
                            $.ajax({
                                url: url,
                                type: "get",
                                dataType: "json",
                                success: function (response) {
                                    console.log(response)
                                    if (response.status == 200) {
                                        Swal.fire(
                                            'Silindi!',
                                            '',
                                            'success'
                                        )
                                        element.outerHTML = '';
                                    }
                                    else if (response.status == 400) {
                                        //toastr.error(response.message)
                                        Swal.fire({
                                            title: 'Error!',
                                            icon: 'error',
                                            confirmButtonText: 'Cool'
                                        })
                                    }
                                }
                            });
                        }
                    })
                });
            });

        $(document).ready(() => {
            //Edit(Get)
            $(document).on('click', '.editBtn', (e) => {
                const id = $(e.currentTarget).data('id');

                $.ajax({
                    url: `/Admin/Slider/Edit/${id}`,
                    type: 'GET',
                    success: (response) => {
                        console.log(response)
                        if (response.hasOwnProperty('status') && response.status === 400) {
                            alert('Not Found');
                        }
                        else {
                            console.log(response);
                            $('#SliderEditForm input[name="Id"]').val(response.id);
                            $('#SliderEditForm input[name="Destiantion"]').val(response.destiantion);
                            $('#SliderEditForm input[name="Way"]').val(response.way);
                            $('#SliderEditForm input[name="Classes"]').val(response.classes);
                            $('#SliderEditForm input[name="FlightNumber"]').val(response.flightNumber);
                            $('#SliderEditForm input[name="Price"]').val(response.price);
                            $('#SliderEditForm input[name="Date"]').val(response.date);
                            $('#SliderEditForm input[name="LandingTime"]').val(response.landingTime);
                            $('#SliderEditForm input[name="Time"]').val(response.time);
                            $('#SliderEditForm input[name="Stop"]').val(response.stop);
                            $('#SliderEditForm input[name="ImgUrl"]').val(response.imgUrl);                       


                        }
                    }
                });
            });


        });



                                                        </script>
                                                    }